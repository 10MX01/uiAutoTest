## Why

当前测试用例执行流程中，选择器生成依赖于单一的静态页面快照。当测试用例涉及多个页面时（如从首页导航到管理员页面），基于首页快照生成的选择器无法匹配新页面上的元素，导致后续步骤执行失败。需要动态快照机制来解决跨页面的选择器生成问题。

## What Changes

- **新增动态快照获取能力**: 在测试执行过程中，当检测到页面发生变化（如导航操作后）时，自动获取当前页面的新快照
- **改进选择器生成策略**: 基于当前页面快照（而非初始快照）为每个步骤生成选择器
- **新增页面变更检测机制**: 识别哪些测试步骤会导致页面变化（导航、路由跳转等）
- **优化快照缓存策略**: 维护页面快照与页面状态的映射，避免不必要的重复快照

## Capabilities

### New Capabilities

- `dynamic-page-snapshot`: 动态获取和管理测试执行过程中的页面快照
- `step-page-context-awareness`: 识别测试步骤的页面上下文，判断是否需要新的快照

### Modified Capabilities

（无现有规范需要修改）

## Impact

**受影响的代码模块**:
- `ai-script-generation/src/main/java/com/uiauto/aiscript/service/impl/TestCaseExecutionServiceImpl.java` - 测试用例执行服务
- 选择器生成相关服务 - 需要支持动态快照输入
- AI格式化服务 - 可能需要调整快照传递方式

**API变化**:
- 测试执行接口需要支持多快照输入
- 新增页面变更检测接口

**依赖系统**:
- 浏览器自动化服务（Selenium/Playwright）- 用于检测页面变化
- 快照存储服务 - 需要支持多快照管理
